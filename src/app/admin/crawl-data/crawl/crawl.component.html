<div class="col-12 grid-margin stretch-card mb-0">
  <div class="card">
    <div class="card-body">
      <h4 class="card-title" [innerText]="title | translate"></h4>
      <form nz-form class="forms-sample mt-4">
        <nz-form-item >
          <nz-form-label [nzSpan]="1">Email: </nz-form-label>
          <nz-form-control [nzSpan]="20" nzHasFeedback>
            <nz-select name="select-email" [(ngModel)]="params.email" (ngModelChange)="onEmailChange($event)">
              <nz-option *ngFor="let email of emails"  [nzValue]="email" [nzLabel]="email"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label [nzSpan]="1" >URL: </nz-form-label>
          <nz-form-control [nzSpan]="20"nzValidateStatus="URL" nzHasFeedbac >
            <input nz-input [(ngModel)]="params.url" placeholder="Nhập URL"
                   [ngClass]="{'error-input-custom': showBorderError}" id="url"/>
          </nz-form-control>
        </nz-form-item>
        <div class="mt-5">
          <button class="btn btn-gradient-primary-2" (click)="getData()"> Crawl </button>
        </div>
      </form>
      <div class="">
        <div class="d-flex flex-row-reverse mb-2">
          <button type="button" class="btn btn-outline-secondary btn-rounded btn-icon"
                  title="Làm mới"
                  (click)="getListCrawl()"
          >
            <i class="mdi mdi-refresh text-danger"></i>
          </button>
        </div>
      </div>
      <div class="table-responsive mt-3">
        <h4 class="card-title text-center">Danh Crawl trong tuần này</h4>
        <div class="d-flex flex-row-reverse">
        </div>
        <table class="table table-bordered table-striped table-hover mt-2">
          <thead>
          <tr>
            <th> Id</th>
            <th> Tên đề thi</th>
            <th> Thời gian bắt đầu crawl</th>
            <th> Thời gian hoàn thành crawl</th>
            <th> Trạng thái</th>
            <th> Mô tả </th>
            <th> Đường link</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let data of listCrawl">
            <td>{{ data.id }}</td>
            <td [popover]= "data.examName" >{{ data.examName }}</td>
            <td>{{ data.startTime | date : formatDate: timeZone }}</td>
            <td>{{ data.endTime | date : formatDate: timeZone}}</td>
            <td>{{ data.jobStatus | translate}}</td>
            <td [popover]= "data.description"> {{ data.description | translate}}</td>
            <td [popover]= "data.jobLink">{{ data.jobLink }}</td>
          </tr>
          </tbody>
        </table>
      </div>
      <div class="mt-2 d-flex flex-row-reverse">
        <nz-pagination
          [(nzPageIndex)]="this.pagination.page"
          [nzTotal]="pagination.total"
          [nzShowTotal]="rangeTemplate"
          nzShowSizeChanger
          [(nzPageSize)]="this.pagination.size"
          (nzPageIndexChange)="changePage($event)"
          (nzPageSizeChange)="changeSize($event)"
        ></nz-pagination>
      </div>
    </div>
  </div>
</div>
<ng-template #rangeTemplate let-range="range" let-total>
  {{ range[0] }}-{{ range[1] }} of {{ total }} items
</ng-template>
